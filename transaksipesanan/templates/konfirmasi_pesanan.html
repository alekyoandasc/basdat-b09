{% extends 'base.html' %}

{% block meta %}
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
{% endblock meta %}

{% block content %}
<h2>Konfirmasi Pembayaran</h2>
<br>

<p>Waktu Pemesanan :{{current_time}}</p> <br>
<p>Nama Pelanggan : {{user_name}}</p>
<p>Jalan : {{data_jalan}}</p>
<p>Kecamatan : {{data_kecamatan}}</p>
<p>Kota : {{data_kota}}</p>
<p>Provinsi : {{data_provinsi}}</p>
<br>
<p>Restoran : {{nama_restoran}}</p>
<p>Jalan : {{jalan_restoran}}</p>
<p>Kecamatan : {{kecamatan_restoran}}</p>
<p>Kota : {{kota_restoran}}</p>
<p>Provinsi : {{provinsi_restoran}}</p>
<br>
<p>Makanan yang dipesan : </p>
<ul>
    {% for pesanan in daftar_pesanan %}
    <li>{{pesanan.0}} - {{pesanan.4}}</li>
    {% endfor %}
</ul>

<br>
<p>Total Harga Makanan : {{total_harga_pesanan}}</p>
{% if total_diskon != None %}
        <p>Total Diskon : {{total_diskon}}</p>
        {% else %}
        <p>Total Diskon : -</p>
{% endif %}

<p>Biaya Pengantaran : 4000</p> 
<p>Total Biaya : {{total_biaya}}</p>
<p>Jenis Pembayaran : {{metode_pembayaran}}</p>

<br>
<p id="timer">Sisa Waktu Konfirmasi : </p>
<p>Status Pembayaran : Menunggu Pembayaran</p>
<p>Status Pesanan : Menunggu Konfirmasi Restoran</p>

<br>

<a href="{% url 'show_ringkasan_pesanan' %}">Konfirmasi Pembayaran</a>

<script>
var sec = 60;

setInterval(function(){
    sec -= 1;
    document.getElementById('timer').innerHTML = 'Sisa Waktu Konfirmasi : ' + sec + ' detik';

    if (sec == 0){
        alert("Waktu habis");
        window.location.href = '/transaksipesanan/'
    }
}, 1000);
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
{% endblock content %}